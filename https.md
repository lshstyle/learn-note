 客户端  -> 浏览器  ->  服务器

 http 默认 80

https 默认 443

 公钥加密  私钥解密

私钥加密  公钥解密  

## 概念

 HTTP  HyperText Transfer Protocol 超文本传输协议 客户端浏览器与web服务器之间的应用层通信协议

HTTPS  HyperText Transfer  Protocol over Secure Socket Layer Http + SSL /TLS  

SSL安全套接字层

TLS 传输层安全

## 加密算法

### 1.对称加密

DES AES-GCM

### 2.非对称加密

RSA DSA ECDSA DH ECDHE

### 3.哈希算法

MD5  SHA1  SHA2 SHA256

MD5 128位

SHA1 160位

SHA2 256位

4.数字签名

签名就是在信息的后面再加上一段内容（信息经过hash后的值），可以证明信息没有被修改过。

## HTP访问过程

client   ->   server

交互过程中没有任何的身份确认，数据明文传输，"裸奔"在互联网上，很容易遭到黑客攻击。

HTTP传输面临的风险

1. 窃听风险：黑客可以获知通信内容

2. 篡改风险：黑客可以修改通信内容

3. 冒充风险：黑客可以冒充他人身份参与通信


## HTTP -> HTTPS

#### 对称加密

1. 客户端对服务器建立通信

2. 服务器和客户端建立通信

3. 客户端根据加密算法发送内容

   弊端：维护大量的秘钥，一旦泄露，形同虚设

#### 非对称加密

1. 客户端对服务器建立通信

2. 服务器和客户端建立通信

3. 客户端对发送内容公钥加密

4. 服务端私钥解密，返回结果，私钥加密

5.  客户端根据响应，公钥解密

   弊端：公钥是公开的，黑客不能破解客户端的内容，但是可以破解服务单返回的内容。

#### 对称加密+非对称加密

通过非对称加密获取对称秘钥，然后通过对称秘钥会话

弊端：

1.使用非对称加密，客户端的公钥如何获取。在会话开始前，客户端自己去下载，下载地址可能为假，客户端每次会话前去下载公钥也麻烦。

2.会话开始前，服务器把公钥发给客户端。如果黑客劫持服务器，送假的公钥给客户端，无法避免

#### SSL证书

1.客户端对服务器建立通信

2.服务器和客户端建立通信，颁发证书

​	证书包含：

​        证书的发布机构CA

​        证书的有效期

​        公钥

​        证书所有者

​        签名

3.客户端接收到服务端发来的SSL证书时，对证书真伪进行校验。

​	具体步骤：

1. 首先读取证书所有者，有效期等信息
2. 查找操作系统内置的受信任的证书发布机构CA,与服务器发来的证书颁发者CA对比，用于验证证书是否为合法机构颁发
3.  如果找不到，就会报错，证书不可信任
4. 如果找到，取出公钥，对签名进行解析，使用相同的hash算法计算出证书的hash值，将这个hash值与证书的签名做对比，如果结果一致，则证书没有被冒充，公钥用于后期加密。